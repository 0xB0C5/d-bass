##################
# RASTER EFFECTS #
##################

Sync:
	The IRQ sync is the amount of time from the last IRQ before NMI until NMI.
	It is measured in ticks of 8 cpu cycles.

	User IRQ time is represented as a pair (IRQs, ticks) where ticks is under 72.

IRQ:
	decrement irq_user_counter
	if it hits 0, wait some number of ticks and call user IRQ.

NMI:
	Save irq_user_counter to nmi_user_counter

Once per frame:
	- Check if nmi_user_counter matched the sync, and update sync if needed.
	- Use sync to compute what the next nmi_user_counter should be.

Startup:
	- Estimate sync when enabling PPU (optional)
		- Wait for VBlank via status (so we don't need extra code in NMI)
		- Measure time until IRQ counter changes
	- Otherwise, you can just estimate it's half an IRQ (36 ticks) and let the sync update handle it.

